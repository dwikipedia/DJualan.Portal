<div class="product-detail-container">
  <!-- Breadcrumb -->
  <nav class="breadcrumb">
    <a routerLink="/dashboard" class="breadcrumb-link">Dashboard</a>
    <span class="breadcrumb-separator">‚Ä∫</span>
    <a routerLink="/products" class="breadcrumb-link">Products</a>
    <span class="breadcrumb-separator">‚Ä∫</span>
    <span class="breadcrumb-current" *ngIf="product">{{ product.name }}</span>
  </nav>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>Loading product details...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-state">
    <div class="error-icon">‚ö†Ô∏è</div>
    <h3>Product Not Found</h3>
    <p>{{ error }}</p>
    <button (click)="goBack()" class="btn btn-primary">Back to Products</button>
  </div>

  <!-- Product Detail -->
  <div *ngIf="product && !loading" class="product-detail">
    <!-- Admin Actions Header -->
    <div class="admin-actions-header" *ngIf="isLoggedIn">
      <div class="admin-buttons">
        <a [routerLink]="['/products/edit', product.id]" class="btn btn-edit">
          <span class="btn-icon">‚úèÔ∏è</span>
          Edit Product
        </a>
        <a [routerLink]="['/products/delete', product.id]" class="btn btn-delete">
          <span class="btn-icon">üóëÔ∏è</span>
          Delete Product
        </a>
      </div>
      <div class="product-meta-info">
        <span class="meta-item">
          <strong>ID:</strong> {{ product.id }}
        </span>
        <span class="meta-item">
          <strong>Created:</strong> {{ formatDate(product.createdAt) }}
        </span>
        <span class="meta-item">
          <strong>Updated:</strong> {{ formatDate(product.updatedAt) }}
        </span>
        <span class="meta-item status" [class]="product.isActive ? 'active' : 'inactive'">
          <strong>Status:</strong> {{ product.isActive ? 'Active' : 'Inactive' }}
        </span>
      </div>
    </div>

    <div class="product-layout">
      <!-- Image Gallery -->
      <div class="image-section">
        <div class="main-image">
          <img [src]="selectedImage" [alt]="product.name" (error)="selectedImage = 'https://via.placeholder.com/500x500/0078D4/ffffff?text=No+Image'">
          <div *ngIf="!product.isActive" class="inactive-overlay">
            <span class="inactive-text">Product Inactive</span>
          </div>
        </div>
        <div class="image-thumbnails" *ngIf="product.imageUrl">
          <div class="thumbnail" 
               [class.active]="selectedImage === product.imageUrl"
               (click)="selectedImage = product.imageUrl">
            <img [src]="product.imageUrl" [alt]="product.name + ' thumbnail'">
          </div>
        </div>
      </div>

      <!-- Product Info -->
      <div class="info-section">
        <div class="product-header">
          <h1 class="product-title">{{ product.name }}</h1>
          <span class="product-category-badge">{{ product.category }}</span>
        </div>
        
        <div class="product-rating">
          <div class="stars">
            <span class="star">‚≠ê</span>
            <span class="star">‚≠ê</span>
            <span class="star">‚≠ê</span>
            <span class="star">‚≠ê</span>
            <span class="star">‚≠ê</span>
            <span class="rating-text">4.5 (128 reviews)</span>
          </div>
        </div>

        <div class="price-section">
          <span class="current-price">{{ product.priceInRp || formatPrice(product.price) }}</span>
          <span *ngIf="product.price > 200000" class="original-price">
            {{ formatPrice(product.price * 1.2) }}
          </span>
          <span *ngIf="product.price > 200000" class="discount-badge">Save 20%</span>
        </div>

        <div class="stock-info">
          <span class="stock-status" [class]="getStockStatusClass()">
            {{ getStockStatus() }}
          </span>
          <span class="stock-quantity">({{ product.stock }} units available)</span>
        </div>

        <div class="product-description">
          <h3>Description</h3>
          <p>{{ product.description }}</p>
        </div>

        <div class="product-features">
          <h3>Features</h3>
          <ul>
            <li>High quality materials</li>
            <li>Fast shipping available</li>
            <li>30-day return policy</li>
            <li>Customer support included</li>
          </ul>
        </div>

        <!-- Out of Stock Section -->
        <div *ngIf="product.stock === 0 || !product.isActive" class="out-of-stock-section">
          <div class="out-of-stock-content">
            <div class="out-of-stock-icon">üòî</div>
            <div>
              <p class="out-of-stock-message">
                {{ !product.isActive ? 'This product is currently inactive.' : 'This product is currently out of stock.' }}
              </p>
              <p class="out-of-stock-suggestion">
                {{ !product.isActive ? 'Please contact the administrator for more information.' : 'Check back later or browse similar products.' }}
              </p>
            </div>
          </div>
          <div class="out-of-stock-actions">
            <button (click)="goBack()" class="btn btn-secondary">Continue Shopping</button>
            <a routerLink="/products" class="btn btn-primary">Browse Products</a>
          </div>
        </div>
      </div>

      <!-- Product Info Card -->
      <div class="product-info-card">
        <div class="card-content">
          <div class="price-card">
            <span class="price">{{ product.priceInRp || formatPrice(product.price) }}</span>
            <div class="delivery-info">
              <span class="free-delivery">FREE delivery</span>
              <span class="delivery-date">Get it by tomorrow</span>
            </div>
          </div>

          <div class="stock-status-card" [class]="getStockStatusClass()">
            {{ getStockStatus() }}
          </div>

          <div class="security-info">
            <div class="secure-transaction">
              <span class="lock-icon">üîí</span>
              Secure transaction
            </div>
          </div>

          <div class="shipping-info">
            <div class="shipping-option">
              <strong>Delivery:</strong> Jakarta, Indonesia
            </div>
            <div class="shipping-option">
              <strong>Shipping:</strong> FREE
            </div>
            <div class="shipping-option">
              <strong>Returns:</strong> 30 days
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Additional Product Information -->
    <div class="additional-info" *ngIf="isLoggedIn">
      <div class="info-section">
        <h3>Product Management</h3>
        <div class="management-grid">
          <div class="management-card">
            <h4>Inventory</h4>
            <p><strong>Current Stock:</strong> {{ product.stock }} units</p>
            <p><strong>Status:</strong> 
              <span [class]="product.isActive ? 'status-active' : 'status-inactive'">
                {{ product.isActive ? 'Active' : 'Inactive' }}
              </span>
            </p>
            <button class="btn btn-outline btn-small">Update Stock</button>
          </div>
          <div class="management-card">
            <h4>Sales</h4>
            <p><strong>Price:</strong> {{ formatPrice(product.price) }}</p>
            <p><strong>Category:</strong> {{ product.category }}</p>
            <button class="btn btn-outline btn-small">View Analytics</button>
          </div>
          <div class="management-card">
            <h4>Quick Actions</h4>
            <div class="quick-action-buttons">
              <a [routerLink]="['/products/edit', product.id]" class="btn btn-edit btn-small">
                <span class="btn-icon">‚úèÔ∏è</span>
                Edit Product
              </a>
              <a [routerLink]="['/products/delete', product.id]" class="btn btn-delete btn-small">
                <span class="btn-icon">üóëÔ∏è</span>
                Delete Product
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>